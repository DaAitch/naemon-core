Included from http://jc.ngo.org.uk/trac-bin/trac.cgi/wiki/LibTap
in order to facilitate testing
